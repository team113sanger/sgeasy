% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/facades.R
\name{prepare_gene_level_data}
\alias{prepare_gene_level_data}
\title{Prepare gene-level dataset from targeton results}
\usage{
prepare_gene_level_data(
  data,
  exon_col = "EXON",
  exon_pattern = "/\\\\d+$",
  exon_levels = NULL,
  reweight = TRUE,
  fdr_threshold = 0.01
)
}
\arguments{
\item{data}{A data frame of processed contrast results containing
\code{Targeton_ID} and \code{EXON} columns.}

\item{exon_col}{Column name containing exon information (default: "EXON").}

\item{exon_pattern}{Regex pattern to extract exon number from exon_col
(default: "/\\d+$" removes denominator like "/6" from "1/6").}

\item{exon_levels}{Character vector of exon factor levels for ordering.
If NULL, levels are determined automatically in descending order.}

\item{reweight}{Logical; whether to compute reweighted scores for
replicated variants across the gene (default: TRUE).}

\item{fdr_threshold}{FDR threshold for functional classification in
reweighted results (default: 0.01).}
}
\value{
A list containing:
\describe{
\item{gene_data}{Data frame with all variants and an \code{Exons} factor
column for faceting}
\item{exon_annotations}{Data frame mapping Targeton_ID to Exons}
\item{reweighted}{Data frame of reweighted variant scores (if
reweight = TRUE), or NULL}
\item{combined}{Gene data joined with reweighted scores (if
reweight = TRUE), or NULL}
}
}
\description{
Combines results from multiple targetons (exons) into a single gene-level
dataset suitable for visualization and aggregated analysis.
}
\examples{
\dontrun{
# Basic usage
gene_results <- prepare_gene_level_data(processed_contrast_tables)

# Access components
gene_results$gene_data       # For plotting individual variants
gene_results$reweighted      # Aggregated scores per unique variant
gene_results$combined        # Combined for weighted score plots

# Custom exon ordering
gene_results <- prepare_gene_level_data(
  data = processed_data,
  exon_levels = c("6", "5", "4", "3", "2", "1")
)
}

}
