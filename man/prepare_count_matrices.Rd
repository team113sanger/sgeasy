% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/facades.R
\name{prepare_count_matrices}
\alias{prepare_count_matrices}
\title{Prepare count matrices for analysis}
\usage{
prepare_count_matrices(
  complete_dataset,
  annotation,
  exclude_samples = NULL,
  exclude_targetons = NULL,
  min_counts = 10,
  sample_col = "supplier_name",
  count_col = "COUNT",
  targeton_col = "targeton_id"
)
}
\arguments{
\item{complete_dataset}{Data frame from \code{load_sge_data()$complete_dataset}.}

\item{annotation}{Data frame of variant annotations (from \code{load_sge_data()}).}

\item{exclude_samples}{Character vector of sample names to exclude
(default: NULL).}

\item{exclude_targetons}{Character vector of targeton IDs to exclude
(default: NULL).}

\item{min_counts}{Minimum total count threshold (default: 10).}

\item{sample_col}{Column name for sample identifier (default: "supplier_name").}

\item{count_col}{Column name for count values (default: "COUNT").}

\item{targeton_col}{Column name for targeton ID (default: "targeton_id").}
}
\value{
A list containing:
\describe{
\item{annotated_counts}{List of annotated count data frames by targeton}
\item{normalisation_matrices}{List of normalization matrices by targeton}
\item{complete_matrices}{List of full count matrices by targeton}
\item{targeton_ids}{Character vector of targeton IDs}
}
}
\description{
Transforms the loaded data into analysis-ready count matrices. This includes
filtering, pivoting, deduplication, annotation joining, and artefact removal.
}
\examples{
\dontrun{
matrices <- prepare_count_matrices(
  complete_dataset = data$complete_dataset,
  annotation = data$annotation,
  exclude_samples = c("bad_sample_1"),
  min_counts = 10
)
}

}
